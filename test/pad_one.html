<html>
  <head>
    <meta charset="utf-8">
    <title>WebML Polyfill | Mocha Tests</title>
  </head>
  <body>
    <div id="mocha"></div>
    <div> <input type="button" onclick="predict()" value="button"></div>
    <div> <input type="file"  id="inputData"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/4.0.1/mocha.min.js"></script-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/5.2.0/mocha.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.1.2/chai.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="../dist/webml-polyfill.js"></script>
    <script src="./utils.js"></script>
    <script>
      window.onload = setOptions;
    </script>
    <script>
      mocha.setup('bdd');
    </script>
    <!--script src="./cts/test/V1_0/avg_pool_float_2.js"></script-->
    <!--script src="./cts/test/V1_0/resize_bilinear.js"></script-->
    <!--script src="./cts/test/V1_0/conv_float.js"></script-->
    <!--script src="./cts/test/V1_0/add.js"></script-->
    <script src="./cts/test/V1_0_plus/depthwise_conv_relu.js"></script>
    <!--script src="./cts/test/V1_0/depthwise_conv2d_float_large_2.js"></script-->
    <script>

      window.mochaFinish = false;
      mocha.globals(['jQuery']);
      mocha.run(function() {window.mochaFinish = true});


var input_data, weights_data, bais_data, output_data, op3_output;
      function predict() {

describe('CTS', function() {
        const assert = chai.assert;
  const nn = navigator.ml.getNeuralNetworkContext();

  it('check result for Depthwise conv relu example-1', async function() {
    let model = await nn.createModel(options);
    let operandIndex = 0;

    let input_length = 28 * 28 * 1;
    var new_input_data = new Float32Array(input_length);
    for (var i = 0; i < input_length; i++) {
        new_input_data[i] = input_data[i];
    }
    input_data = new_input_data;
    console.log(input_data.length);


    let weight_length = 5 * 5 * 1;
    var new_weight_length = new Float32Array(weight_length);
    for (var i = 0; i < weight_length; i++) {
        if (i == 15) new_weight_length[i] = 0;
        else new_weight_length[i] = weights_data[i];
    }
    weights_data = new_weight_length;
    console.log(weights_data.length);

    bais_data = new Float32Array([0.6571938991546631]);

    let op2_value = input_data; 
    let op3_expect = output_data;

    let type0 = {type: nn.INT32};
    let type2 = {type: nn.TENSOR_FLOAT32, dimensions: [1, 5, 5, 1]};
    let type2_length = product(type2.dimensions);
    let type1 = {type: nn.TENSOR_FLOAT32, dimensions: [1, 28, 28, 1]};
    let type1_length = product(type1.dimensions);
    let type4 = {type: nn.TENSOR_FLOAT32, dimensions: [1, 27, 27, 1]};
    let type4_length = product(type4.dimensions);
    let type3 = {type: nn.TENSOR_FLOAT32, dimensions: [1]};
    let type3_length = product(type3.dimensions);

    let b4 = operandIndex++;
    model.addOperand(type0);
    let b5 = operandIndex++;
    model.addOperand(type0);
    let b6 = operandIndex++;
    model.addOperand(type0);
    let b7 = operandIndex++;
    model.addOperand(type0);
    let b8 = operandIndex++;
    model.addOperand(type0);
    let op2 = operandIndex++;
    model.addOperand(type1);
    let op3 = operandIndex++;
    model.addOperand(type4);
    let op0 = operandIndex++;
    model.addOperand(type2);
    let op1 = operandIndex++;
    model.addOperand(type3);

    model.setOperandValue(b4, new Int32Array([1]));
    model.setOperandValue(b5, new Int32Array([1]));
    model.setOperandValue(b6, new Int32Array([1]));
    model.setOperandValue(b7, new Int32Array([1]));
    model.setOperandValue(b8, new Int32Array([0]));
    // var new_weights_data = new Float32Array(bais_data);
    // var filter_height = 5, filter_width = 5, depth_out = 528;
    // for (var h = 0; h < filter_height; h++) {
    //   for (var w = 0; w < filter_width; w++) {
    //     for (var c = 0; c < depth_out; c++) {
    //       new_weights_data[c * filter_height * filter_width +
    //                         h * filter_width + w] =
    //           weights_data[h * filter_width * depth_out + w * depth_out + c];
    //     }
    //   }
    // }
    model.setOperandValue(op0, new Float32Array(weights_data));
    model.setOperandValue(op1, new Float32Array(bais_data));
    model.addOperation(nn.DEPTHWISE_CONV_2D, [op2, op0, op1, b4, b5, b6, b7, b8], [op3]);

    model.identifyInputsAndOutputs([op2], [op3]);
    await model.finish();

    let compilation = await model.createCompilation();
    compilation.setPreference(prefer);
    await compilation.finish();

    let execution = await compilation.createExecution();

    let op2_input = new Float32Array(op2_value);
    execution.setInput(0, op2_input);

    op3_output = new Float32Array(type4_length);
    execution.setOutput(0, op3_output);

    await execution.startCompute();

    for (let i = 0; i < type4_length; ++i) {
      if(!almostEqualCTS(op3_output[i], op3_expect[i])) {
        console.log("index: " + i + " op3_output " + op3_output[i] + " op3_expect " + op3_expect[i]);
        break;
      }
    }
    
    let sum = 0;
      for (let i = 0; i < type4_length; i++) {
        sum += Math.pow(op3_output[i] - op3_expect[i], 2);
      }
      console.log(`var: ${sum / type4_length}`);
});
});



window.mochaFinish = false;
      mocha.globals(['jQuery']);
      mocha.run(function() {window.mochaFinish = true});
}0.15915384888648987,4.46528434753418,-0.12151330709457397,4.912605285644531,0.638407826423645,1.7064058780670166,-0.26514923572540283,4.487456798553467,1.8203247785568237,5.719657897949219,-1.287781834602356,2.6112115383148193,-0.015321251004934311,2.0923240184783936,-1.365742802619934,2.007901191711426,0.03656568005681038,2.0964696407318115,1.441450834274292,2.983844041824341,1.9962975978851318,2.8762989044189453,-0.2572890520095825,3.035085439682007,-0.3167737126350403,2.994141101837158,1.2831087112426758,1.3132271766662598,-0.05125664174556732,3.9052205085754395,0.048766981810331345,4.917515277862549,-0.974867045879364,5.817103385925293,-0.7137150168418884,2.503293991088867,0.6526724696159363,3.721780776977539,0.5679243803024292,3.1313812732696533,0.2948299050331116,5.277170658111572,-0.05216651409864426,3.8708853721618652,1.038857340812683,3.406087636947632,-0.6930888891220093,1.9286422729492188,-0.3889666497707367,5.830018043518066,-1.1539437770843506,5.481097221374512,0.23854003846645355,6.085133075714111,0.4501839280128479,2.061426877975464,1.455264925956726,2.3061091899871826,4.03629207611084,6.739923477172852,2.8517038822174072,5.009505271911621,1.320984125137329,9.375603675842285,1.323562741279602,5.785605430603027,0.5755010843276978,2.533921957015991,0.43287554383277893,4.4516730308532715,2.4967269897460938,3.0604825019836426,6.471222400665283,6.4893317222595215,3.5971107482910156,7.732393264770508,-0.210046648979187,6.798752784729004,-0.28995826840400696,5.1570963859558105,1.3020257949829102,5.814761161804199,-1.1095638275146484,7.473114013671875,3.5912346839904785,7.736327171325684,3.2919013500213623,4.533364295959473,2.498401641845703,1.6579777002334595,2.184107542037964,2.769578695297241,3.160881996154785,2.892015218734741,3.4303648471832275,3.4965739250183105,8.293819427490234,4.080953598022461,4.28494930267334,4.641011714935303,-1.3316389322280884,0.8791138529777527,2.4415102005004883,2.9731991291046143,0.9930418729782104,4.222788333892822,0.20194029808044434,3.367495059967041,8.657855987548828,3.5858936309814453,9.201985359191895,0.49894747138023376,-0.36463308334350586,2.209449291229248,0.1574079692363739,4.374133110046387,0.3711644113063812,2.362396717071533,0.7796432375907898,-0.6408183574676514,0.42705193161964417,1.482391357421875,1.7685314416885376,3.988279104232788,-0.38091880083084106,7.376247882843018,-0.4592353105545044,3.7720088958740234,-1.405765175819397,4.55443811416626,1.783673882484436,0.18189328908920288,6.922815322875977,1.09759521484375,3.2896814346313477,0.6778188347816467,0.8162596225738525,2.06337571144104,5.4236741065979,2.6795461177825928,0.3579089641571045,2.362508773803711,1.855428695678711,0.34324973821640015,0.8087665438652039,5.044634819030762,1.1059231758117676,1.8777799606323242,1.6264381408691406,3.2718889713287354,3.230294942855835,4.0242414474487305,3.5820186138153076,6.5412702560424805,3.5011727809906006,3.0727219581604004,1.1537121534347534,2.857553005218506,-1.001853108406067,3.4852535724639893,4.727370262145996,3.96256685256958,8.17194652557373,2.490398645401001,3.7633860111236572,2.9879651069641113,3.0966248512268066,1.5243926048278809,-1.3824933767318726,4.250605583190918,-0.1868278980255127,7.5345964431762695,2.807720899581909,2.8802027702331543,0.8242403864860535,0.0916401743888855,2.2086615562438965,4.4825873374938965,1.5516424179077148,2.1779532432556152,1.8308252096176147,3.476207971572876,6.166468143463135,1.0861515998840332,7.01971435546875,2.7536022663116455,2.8737294673919678,2.645554542541504,2.216097116470337,5.530428409576416,4.524808406829834,7.226052284240723,4.872030735015869,6.014946937561035,4.051283836364746,4.510955333709717,1.6631749868392944,4.233476638793945,2.8016581535339355,4.030463218688965,7.8399858474731445,5.860547065734863,6.518739223480225,-0.2795124053955078,2.8488800525665283,3.784445285797119,3.0740065574645996,3.5825889110565186,0.6948328018188477,5.35667610168457,1.7254209518432617,4.390659809112549,1.139028787612915,5.353939533233643,-1.6450130939483643,1.3872294425964355,0.45928430557250977,3.3706483840942383,-1.3367429971694946,8.95075511932373,1.1815266609191895,7.3241047859191895,1.7619233131408691,6.820937633514404,2.9793152809143066,3.9153430461883545,1.5350191593170166,4.360926151275635,1.5315543413162231,-0.811738133430481,1.057712435722351,3.144806146621704,1.7473305463790894,6.975978374481201,3.9803881645202637,2.0793185234069824,1.8730357885360718,6.46143102645874,3.5051186084747314,4.030464172363281,-1.9141969680786133,5.038145542144775,-2.0424141883850098,4.826298713684082,0.7370988726615906,3.7170801162719727,1.9638727903366089,4.805775165557861,0.8697502017021179,0.7056397795677185,0.9464367628097534,3.9155585765838623,-0.19109556078910828,3.5490992069244385,-0.4215359389781952,5.814833641052246,0.058760903775691986,4.251489162445068,0.0901845395565033,2.0807688236236572,-0.8099842667579651,1.884897232055664,0.9366509318351746,1.3998771905899048,-0.3842693567276001,3.972121000289917,-0.09473621100187302,4.250697135925293,0.420014888048172,3.4999959468841553,0.7369200587272644,2.871053695678711,6.495481014251709,3.4411709308624268,7.29522705078125,5.757963180541992,4.691219329833984,1.003108024597168,2.8447506427764893,0.3411303162574768,-2.205142021179199,6.559898376464844,0.656680703163147,4.389798164367676,1.8640707731246948,4.580172538757324,3.3718440532684326,3.1087889671325684,2.70219087600708,3.638705015182495,0.3781476318836212,1.759838581085205,-0.5903269648551941,4.899636268615723,-1.00410795211792,0.5136140584945679,2.393314838409424,2.7013895511627197,4.562392711639404,4.795703411102295,1.3365352153778076,2.07081937789917,4.048762321472168,2.02058482170105,3.518639087677002,1.495728850364685,2.858480215072632,3.609708786010742,-0.8114861845970154,4.308389663696289,0.847957193851471,2.9573278427124023,1.5816771984100342,6.207163333892822,0.9229617714881897,4.973031997680664,4.3051910400390625,9.34884262084961,2.876739740371704,6.043251037597656,0.9757061004638672,7.870285987854004,2.0160932540893555,3.972890853881836,-0.25365737080574036,2.726757049560547,-0.3222164809703827,5.277616024017334,5.448808670043945,5.538980007171631,2.1172282695770264,2.7622649669647217,0.7552111744880676,4.750490665435791,1.0799983739852905,1.3077294826507568,0.25793924927711487,4.532558917999268,1.8559719324111938,7.95777702331543,1.7437376976013184,2.9528825283050537,3.0199058055877686,2.3777425289154053,4.101383686065674,2.5290780067443848,1.226090908050537,2.1116161346435547,4.1420369148254395,4.147022247314453,4.182790279388428,2.0374884605407715,8.389372825622559,3.578366994857788,3.7578554153442383,2.118201732635498,-0.2283368557691574,2.528848886489868,4.179171562194824,3.4961066246032715,0.2623799741268158,4.038218021392822,-0.9346628189086914,3.0306077003479004,3.7190656661987305,6.01874303817749,2.965456008911133,5.298405170440674,2.545931100845337,3.7788171768188477,3.093296766281128,0.6237720251083374,0.3485105633735657,4.070517539978027,0.45442867279052734,3.295868158340454,2.658031940460205,4.084115505218506,1.3384424448013306,0.31395232677459717,3.5141119956970215,4.250242710113525,3.26855731010437,5.245302200317383,2.7487053871154785,5.56718111038208,6.226173400878906,1.7248026132583618,3.856645107269287,2.000978469848633,1.2020312547683716,3.117121458053589,-0.45838797092437744,4.742019176483154,-1.4896388053894043,7.48333215713501,6.0864667892456055,-1.0278313159942627,6.782808303833008,3.8843846321105957,2.70247220993042,3.222050666809082,0.7398393750190735,5.081565856933594,0.8777844905853271,5.975021839141846,1.567832350730896,5.567770004272461,-0.8159859776496887,7.704840660095215,1.6607396602630615,4.10040283203125,2.776123046875,2.431379556655884,2.674389123916626,3.4167943000793457,2.23380708694458,4.0907111167907715,2.2770822048187256,5.373750686645508,3.110569477081299,4.326760292053223,5.6491498947143555,3.2400221824645996,0.428063303232193,3.342247486114502,0.41134804487228394,6.9395647048950195,0.6095830798149109,7.9327616691589355,2.4237277507781982,4.218020915985107,0.9170993566513062,2.3441543579101562,2.4377975463867188,3.7194337844848633,3.1776082515716553,3.116140365600586,0.0984053835272789,4.669863700866699,3.377108573913574,3.6685400009155273,1.8758882284164429,6.467716693878174,0.8762902021408081,3.7160098552703857,0.1274431049823761,1.643799066543579,-0.4365101754665375,4.35446834564209,1.0287927389144897,3.903088331222534,3.445171594619751,-0.4280785918235779,1.3394454717636108,3.361276388168335,0.060081567615270615,3.2596497535705566,3.5806210041046143,5.124451637268066,1.1137501001358032,3.0760929584503174,1.6601589918136597,3.333956480026245,7.02091121673584,3.7465312480926514,3.3110780715942383,3.9405465126037598,-0.7859113216400146,6.717517375946045,4.870976448059082,6.941544055938721,6.42836332321167,6.514673709869385,3.4908556938171387,6.121789455413818,3.6935529708862305,0.3144013285636902,2.830580711364746,3.0921270847320557,1.2114360332489014,4.798305511474609,0.9748628735542297,4.821917533874512,-1.3087307214736938,3.4408740997314453,4.084874629974365,2.555209159851074,2.2998008728027344,2.728376865386963,2.822721242904663,6.577695846557617,3.443833112716675,5.345521450042725,6.898915767669678,2.9112260341644287,3.784780979156494,2.887664318084717,-0.5168163776397705,0.4074892997741699,0.24274855852127075,2.291329860687256,2.170444965362549,2.6283864974975586,-3.21663498878479,2.344776153564453,-0.3025639057159424,2.7893927097320557,3.7548108100891113,1.8463528156280518,1.8477098941802979,1.263885736465454,1.512954592704773,6.351560115814209,1.86220121383667,4.52671480178833,7.783242702484131,7.102096080780029,3.969791889190674,-0.4897755980491638,-1.4092562198638916,2.590301275253296,0.9977971911430359,2.674241781234741,0.39319944381713867,1.580864429473877,2.5154035091400146,5.189119338989258,1.088440179824829,4.820777893066406,0.43249499797821045,3.417126178741455,0.44858208298683167,0.8013563752174377,5.087615013122559,4.503530025482178,5.417943477630615,6.595221519470215,0.9433900117874146,1.7277281284332275,1.9667394161224365,1.0750246047973633,0.45913827419281006,0.11338993906974792,3.6876585483551025,1.3273156881332397,3.5837578773498535,1.544754147529602,3.3356575965881348,2.366102695465088,1.8221428394317627,2.6130032539367676,-1.2082970142364502,2.8363773822784424,0.9862249493598938,0.39906376600265503,3.4214417934417725,4.263410568237305,3.2129592895507812,2.4632277488708496,4.103478908538818,3.3783974647521973,1.6747791767120361,5.712477684020996,4.655213832855225,2.2455294132232666,6.63018798828125,4.501049041748047,1.376054286956787,3.972594738006592,1.9064393043518066,5.660176753997803,2.2995765209198,3.286931276321411,-0.9863706827163696,2.079547882080078,-2.6758384704589844,6.83378791809082,2.701436996459961,5.80571985244751,6.905089378356934,6.758808135986328,1.82608163356781,6.801609516143799,3.335204839706421,2.813798189163208,4.7965617179870605,5.749425411224365,2.330288887023926,5.4815802574157715,0.48191162943840027,10.776402473449707,1.811119556427002,6.875688552856445,-2.1086270809173584,1.7721617221832275,-0.2612954378128052,4.52562141418457,2.780017137527466,2.8585147857666016,6.918035507202148,7.27463960647583,3.593463897705078,7.7586445808410645,-1.6222995519638062,6.26575231552124,0.1904333233833313,4.47578239440918,0.9999246597290039,6.723542213439941,-0.5617848634719849,7.823537826538086,4.690499782562256,8.219684600830078,4.8429107666015625,4.487960338592529,2.7613346576690674,3.388850688934326,3.070345401763916,4.246919631958008,-0.3670828342437744,1.4774348735809326,4.1159515380859375,3.6647980213165283,8.091511726379395,3.5302531719207764,3.2232069969177246,5.232499599456787,-2.0128414630889893,-1.296288251876831,1.2384172677993774,2.1443586349487305,0.9059919714927673,4.465083599090576,-0.3184145987033844,2.307562828063965,10.152714729309082,2.3538553714752197,7.365835189819336,2.4114198684692383,2.712416172027588,0.23447151482105255,0.9133782982826233,3.7916789054870605,0.23661267757415771,1.3865872621536255,0.6938718557357788,-0.04315704107284546,-0.4355129599571228,0.6801823973655701,3.2721734046936035,4.157706260681152,0.09270907938480377,7.630127429962158,-0.04367056488990784,3.7801883220672607,-1.6318299770355225,3.655813694000244,2.0750818252563477,-0.24075418710708618,7.883994102478027,1.1211669445037842,3.7429730892181396,0.019942641258239746,1.1796953678131104,2.8510055541992188,5.689332008361816,3.263990640640259,3.574856758117676,1.9063072204589844,2.4803006649017334,-0.7195886969566345,0.331653892993927,4.409573554992676,1.3132045269012451,3.2029569149017334,1.104483723640442,3.9616808891296387,2.454911231994629,4.759312629699707,3.871978759765625,7.677267551422119,3.9879534244537354,2.04380464553833,0.586638867855072,3.6456491947174072,0.07414436340332031,4.229029178619385,6.636509895324707,6.747468948364258,10.933828353881836,2.550779342651367,3.8024978637695312,3.6464757919311523,3.609872341156006,3.281364679336548,-1.262273907661438,3.994497299194336,0.2005021870136261,5.278722763061523,1.6838970184326172,2.92279052734375,1.440669059753418,0.24071794748306274,6.793140888214111,4.307953834533691,3.516754388809204,3.130171537399292,1.674291729927063,3.5473830699920654,4.909423351287842,0.009478360414505005,6.486149787902832,3.018181800842285,2.3114564418792725,2.934157609939575,3.901549816131592,6.140232563018799,4.980414867401123,7.077245712280273,3.963937520980835,7.610200881958008,3.5125184059143066,4.477540493011475,1.7128535509109497,4.20011043548584,3.651198387145996,3.3304004669189453,4.599903583526611,5.164449691772461,7.616759300231934,2.967139720916748,2.613684892654419,4.957479476928711,2.6225290298461914,3.901327133178711,0.6580486297607422,5.504622459411621,1.8198552131652832,2.876500368118286,0.8244258165359497,5.85734748840332,-2.526550531387329,1.761041283607483,-0.33488693833351135,3.63498592376709,-2.2701289653778076,8.624198913574219,0.8670995831489563,7.881285667419434,0.47674560546875,7.4109787940979,3.5947673320770264,2.2028369903564453,1.4419025182724,3.5913584232330322,1.4732787609100342,-0.6366115808486938,0.7869315147399902,4.786906719207764,1.406922698020935,6.251279354095459,4.4165754318237305,1.9941530227661133,1.1491204500198364,5.994614601135254,3.307520627975464,4.205328464508057,-1.9921276569366455,6.130534648895264,-1.4366674423217773,5.298111915588379,0.28370383381843567,4.268464088439941,1.6316744089126587,5.080843925476074,-0.8685687184333801,0.8369618058204651,0.6432825922966003,4.222775936126709,0.4079039394855499,3.534888982772827,0.5875561833381653,4.7842183113098145,-0.7521613240242004,3.431234836578369,0.0961010605096817,2.7124507427215576,0.7353079319000244,2.879162311553955,1.373029112815857,1.3863804340362549,0.16326160728931427,3.308164358139038,-0.24110694229602814,4.088143348693848,-0.09181901812553406,3.4267778396606445,0.7840756177902222,3.497370481491089,5.777526378631592,3.6862549781799316,8.27572250366211,6.99607515335083,5.909006595611572,1.0340296030044556,5.0146684646606445,0.6523151993751526,-0.21955421566963196,5.936825752258301,2.3871309757232666,3.3652894496917725,2.681969165802002,3.9069671630859375,3.4471282958984375,4.1299591064453125,2.8757050037384033,2.0715229511260986,1.0796617269515991,1.7772060632705688,-1.6528544425964355,3.460723400115967,-1.323161005973816,1.9442002773284912,2.9391262531280518,3.103257894515991,4.166749000549316,6.8066511154174805,1.067414402961731,1.661455512046814,3.8047866821289062,0.837361752986908,4.562534809112549,1.7559988498687744,4.96099328994751,2.742218255996704,-0.8309467434883118,4.795112133026123,0.38025081157684326,2.343125581741333,0.05923222750425339,6.9009013175964355,0.6564270257949829,8.268028259277344,4.250243186950684,12.15344524383545,3.5790085792541504,5.825207233428955,-0.010928317904472351,7.963419437408447,0.6179423332214355,4.33790922164917,0.38443005084991455,2.977522373199463,-1.0437421798706055,5.398064613342285,8.320012092590332,6.994536876678467,1.376045823097229,2.482215642929077,-0.30731967091560364,4.832167625427246,2.2982327938079834,2.963179588317871,3.4618935585021973,7.674805164337158,0.5387473702430725,6.356589317321777,1.610109567642212,2.3576836585998535,3.0636720657348633,2.454223155975342,3.273209810256958,2.1607956886291504,0.6192761659622192,1.8780518770217896,5.189004898071289,3.819761276245117,5.233193874359131,3.254157304763794,9.360750198364258,3.2659952640533447,5.470250129699707,2.8175530433654785,0.2463017851114273,1.4842956066131592,5.527227401733398,3.3026623725891113,0.5357663035392761,3.565805196762085,-0.12574726343154907,2.8147356510162354,3.150156021118164,7.893538951873779,3.572117567062378,4.376845836639404,1.7154093980789185,3.757626533508301,2.848012924194336,4.723649978637695,1.3863909244537354,4.604208469390869,-0.6722168922424316,3.427689790725708,1.9699814319610596,3.982069969177246,2.8027243614196777,0.5939990878105164,3.2278363704681396,3.6466708183288574,3.6657893657684326,5.667190074920654,3.2234702110290527,5.709534645080566,8.14271068572998,0.85496586561203,4.636221408843994,1.2204170227050781,-0.08893859386444092,6.816414833068848,1.4546867609024048,4.473635196685791,-2.5107643604278564,5.387448787689209,6.602860450744629,-0.7011880874633789,6.526645183563232,4.957880020141602,3.428396224975586,3.768228054046631,0.801223635673523,4.911394119262695,0.7114391326904297,6.650137424468994,1.4746536016464233,6.546365737915039,-1.3920456171035767,8.143680572509766,-0.25676634907722473,3.4570484161376953,1.7131048440933228,2.4281418323516846,2.9165756702423096,2.49100661277771,4.1316142082214355,3.2448761463165283,2.255133628845215,4.387353897094727,3.9579310417175293,4.647697448730469,4.534906387329102,0.9479004144668579,0.4755190908908844,4.900073528289795,0.19529137015342712,9.220527648925781,0.4661281108856201,5.7515130043029785,1.6334246397018433,4.998192310333252,1.0638253688812256,1.1644229888916016,2.2424027919769287,4.008955955505371,1.8068068027496338,3.424488067626953,-0.15993422269821167,4.943478584289551,2.8127429485321045,3.771406888961792,2.5235543251037598,7.360594749450684,0.11000394821166992,3.4783082008361816,-1.3321964740753174,5.051156520843506,1.0383495092391968,0.698907732963562,0.7459324598312378,1.7772237062454224,3.3607800006866455,-0.40309998393058777,1.2804442644119263,3.6973211765289307,-1.325502872467041,2.415688991546631,2.3440659046173096,5.710485458374023,-0.152631014585495,3.3137009143829346,2.830425500869751,4.05874490737915,7.332798004150391,2.8173043727874756,3.7562596797943115,3.0151946544647217,0.49706095457077026,5.635931015014648,6.568247318267822,5.861122131347656,4.518102645874023,6.249208450317383,0.04975215345621109,6.251986980438232,4.291067123413086,1.7514467239379883,5.262820243835449,1.8747315406799316,0.545645534992218,5.351940155029297,0.7861216068267822,6.3476057052612305,0.09253935515880585,3.733153820037842,4.355959415435791,2.990063190460205,2.825443983078003,2.8271613121032715,4.8690505027771,5.142642021179199,4.376549243927002,4.658303260803223,4.74928092956543,1.6301523447036743,3.3003220558166504,4.621157646179199,0.1789914071559906,0.6948736906051636,-0.4616106152534485,2.551884412765503,3.0842745304107666,4.562958240509033,-2.8961617946624756,7.036959171295166,0.2519563138484955,0.779441773891449,5.232095718383789,3.233541488647461,2.8352153301239014,2.738771438598633,1.6587916612625122,6.99135684967041,3.3519773483276367,4.252434253692627,9.183572769165039,6.394168376922607,5.914644718170166,-0.5236186981201172,-0.792560875415802,2.879232883453369,0.3815002739429474,2.478480815887451,-0.030271276831626892,1.2628251314163208,1.7736239433288574,3.130157470703125,0.4273229241371155,4.938672065734863,-0.9170181155204773,2.406526803970337,0.9379675984382629,1.3525636196136475,6.1061930656433105,2.986598491668701,2.969289779663086,3.493314266204834,1.0595589876174927,4.833171367645264,1.491573691368103,1.3541022539138794,2.4163753986358643,0.5684685707092285,2.9537339210510254,1.5749372243881226,2.1116185188293457,1.4644032716751099,2.6263110637664795,2.3729817867279053,2.002593517303467,3.3317127227783203,-1.4020617008209229,3.9744791984558105,1.793480396270752,1.0232799053192139,1.9865514039993286,5.113061904907227,2.723700523376465,2.4300694465637207,6.113226890563965,2.592226266860962,3.567490577697754,2.3534562587738037,4.637918472290039,2.1897337436676025,6.905703544616699,5.840151786804199,0.9285779595375061,3.6063051223754883,0.5387011766433716,5.627886772155762,2.173072099685669,3.1782195568084717,-1.5852729082107544,1.1396729946136475,-2.9120705127716064,6.527759075164795,3.246213674545288,5.932672500610352,7.245932102203369,6.66813850402832,0.9974007606506348,6.63877010345459,4.233699321746826,2.8736114501953125,4.322567939758301,4.339773178100586,3.6794090270996094,4.901130676269531,1.4252121448516846,8.141036033630371,0.918793261051178,5.859607219696045,-0.7126731872558594,5.060037612915039,-0.8838144540786743,4.296504974365234,2.876572608947754,2.5922770500183105,5.492008686065674,5.033810138702393,2.5240681171417236,5.739068984985352,-1.6064600944519043,6.036630153656006,0.6761624217033386,4.469475269317627,0.4673975706100464,6.380554676055908,0.4053862690925598,5.435710906982422,3.352818489074707,7.856931209564209,2.3539133071899414,3.2063939571380615,3.5070602893829346,2.6953377723693848,1.840910792350769,3.0486059188842773,-1.0890072584152222,2.4305858612060547,3.924621105194092,4.135075569152832,7.155927658081055,2.519185781478882,4.9720659255981445,5.416958332061768,0.5602045655250549,-1.650987982749939,1.2708925008773804,3.1859145164489746,0.5142074227333069,3.3660571575164795,0.27173954248428345,1.1400901079177856,9.02326774597168,1.832141637802124,7.223701477050781,2.3828184604644775,3.8695621490478516,0.5281423330307007,2.559307098388672,3.698066234588623,3.797395706176758,2.2934861183166504,-0.9090070724487305,2.5528454780578613,-0.6186195611953735,4.119225025177002,2.593109369277954,5.79957914352417,1.4743698835372925,5.495867729187012,-0.06249731034040451,5.062867164611816,-1.0447649955749512,0.6254870891571045,1.3017253875732422,0.6079860925674438,6.111668586730957,2.994741439819336,5.0789055824279785,0.3455832004547119,2.3631949424743652,3.748854637145996,4.218057632446289,3.0229241847991943,1.8591949939727783,1.495931625366211,3.4600462913513184,-1.0694900751113892,1.8075745105743408,3.8787689208984375,-0.008106840774416924,2.6901895999908447,1.1658068895339966,4.121284484863281,2.7924890518188477,4.515500068664551,3.4396510124206543,7.105903148651123,3.619269609451294,2.281646251678467,0.8730773329734802,3.0652637481689453,-1.3889392614364624,5.529056072235107,5.502476692199707,6.113795757293701,8.971138000488281,3.3746440410614014,2.97580623626709,4.001311779022217,3.066330671310425,3.0534586906433105,-1.5397597551345825,3.265171766281128,-0.19018416106700897,4.521889686584473,1.9087934494018555,2.2359609603881836,2.710932731628418,1.6417181491851807,5.075591564178467,4.942224025726318,3.4651784896850586,4.496273040771484,-0.17620576918125153,4.029024600982666,3.634716272354126,0.2052544206380844,5.942948341369629,2.0646016597747803,1.0863165855407715,4.23610258102417,3.7539727687835693,4.3322978019714355,5.682372570037842,6.794423580169678,3.1819000244140625,6.610838890075684,1.9952929019927979,4.079902648925781,0.6941531300544739,3.338439464569092,3.1588807106018066,3.34065318107605,4.768377780914307,5.862433433532715,4.6021857261657715,0.29219651222229004,2.3735122680664062,3.905602216720581,1.2179090976715088,5.126633644104004,0.6659905910491943,4.0430989265441895,0.2819351851940155,2.242443799972534,0.4016856849193573,4.100616455078125,-1.0964704751968384,1.4776179790496826,-0.12529125809669495,2.8652241230010986,-1.6427809000015259,6.936100006103516,0.9496782422065735,6.569696426391602,1.2766517400741577,5.78872013092041,3.8356497287750244,2.5150020122528076,1.8238810300827026,4.1662139892578125,2.1218690872192383,2.26174259185791,0.8659915328025818,4.887770652770996,-0.4307587742805481,5.091443061828613,3.440615653991699,5.316884517669678,0.823373019695282,3.93190336227417,2.6042823791503906,3.9026355743408203,-0.3185786008834839,5.683434009552002,-1.3763278722763062,4.955946445465088,-0.14813874661922455,3.640652656555176,1.3445323705673218,3.834089756011963,-0.6890808343887329,1.2760047912597656,-0.19369357824325562,3.637582778930664,1.2920318841934204,3.6252856254577637,-0.5571310520172119,3.4573442935943604,2.19697904586792,4.352540969848633,-0.38168203830718994,0.701065719127655,2.719935417175293,3.3338100910186768,0.7808696031570435,2.47393536567688,0.5731717348098755,3.3835818767547607,-0.3105137050151825,5.022541522979736,-0.00867333635687828,3.6359291076660156,0.23670800030231476,2.864457607269287,4.704256534576416,3.4578607082366943,6.597130298614502,6.091795444488525,7.231997966766357,2.6988210678100586,5.214277744293213,1.6826434135437012,-0.3668196499347687,5.772736549377441,1.9411386251449585,2.7108850479125977,2.25546932220459,2.629943370819092,4.854769229888916,2.8573102951049805,0.814854085445404,4.755157470703125,1.0996779203414917,3.836486339569092,-1.7733062505722046,1.2181766033172607,-0.005274948198348284,2.6035819053649902,1.4818894863128662,2.5021584033966064,3.6324069499969482,6.560615539550781,1.3473563194274902,2.780153751373291,2.3729963302612305,2.1283040046691895,4.951910018920898,3.159486770629883,4.537156581878662,2.8064370155334473,-1.6641241312026978,5.374654293060303,0.5054377317428589,3.3554582595825195,0.6198279857635498,7.91851806640625,2.4051437377929688,5.220242023468018,0.7070937156677246,12.202651023864746,3.780628204345703,4.4335737228393555,-1.0244321823120117,7.237287998199463,-0.3231128752231598,4.600485801696777,0.4706268608570099,2.4573569297790527,0.32312771677970886,5.311285495758057,8.569072723388672,6.4724321365356445,2.306690216064453,3.115140676498413,0.2655222713947296,5.457236289978027,2.454953193664551,3.6359517574310303,3.0788607597351074,6.798990249633789,1.2157894372940063,4.8580169677734375,1.3977020978927612,3.0810599327087402,3.5424437522888184,2.972712516784668,0.15407681465148926,3.252990245819092,1.8559752702713013,2.05576229095459,5.998841762542725,3.8406550884246826,3.0668256282806396,3.4498789310455322,6.2132086753845215,1.9284210205078125,6.381191253662109,4.485302448272705,0.8055791258811951,1.3193883895874023,5.965641975402832,4.427815914154053,0.18356743454933167,2.7939984798431396,0.16602611541748047,2.397423505783081,1.8695765733718872,6.531208515167236,2.9236199855804443,4.838284492492676,1.9722838401794434,4.415424823760986,3.0950448513031006,1.7199358940124512,2.2598204612731934,4.514629364013672,0.6833599805831909,3.8422675132751465,2.835906982421875,3.9780139923095703,3.6183736324310303,0.7208845615386963,3.4409561157226562,1.703780174255371,3.4500956535339355,5.0188212394714355,2.982053279876709,4.63606595993042,6.793819427490234,1.4211843013763428,4.132903575897217,2.5771121978759766,-0.106199249625206,6.551543712615967,1.500617265701294,4.4409332275390625,-1.5469892024993896,4.1688032150268555,6.123725414276123,0.3636212646961212,5.159328460693359,3.285491466522217,1.0256478786468506,2.419346332550049,0.9939746856689453,3.411186456680298,1.8497804403305054,3.2958273887634277,0.4077669680118561,2.850853443145752,-1.3180110454559326,2.7264997959136963,0.9780935049057007,1.8383116722106934,1.6731843948364258,2.3060684204101562,0.1752699911594391,2.6760127544403076,2.5798933506011963,1.593188762664795,1.7463735342025757,3.140018939971924,3.0516035556793213,2.7924563884735107,2.41294264793396,2.759220600128174,-0.1701851636171341,1.9343640804290771,0.6918039321899414,1.8101997375488281,-0.6780498623847961,2.930974006652832,2.467195749282837,1.5442074537277222,2.108449935913086,1.1396000385284424,2.639561891555786,2.149336814880371,-0.528998851776123,3.3882339000701904,0.6096760630607605,1.6491315364837646,3.193256378173828,1.9338417053222656,3.5631892681121826,2.788266181945801,-0.44711557030677795,2.983020544052124,0.7306634187698364,3.1764323711395264,0.5021579265594482,-0.050304114818573,0.1532966047525406,0.5035759806632996,2.724290370941162,1.356361985206604,1.9908908605575562,1.9818636178970337,-0.05727362632751465,2.7834017276763916,2.1090197563171387,2.7756574153900146,-0.17558851838111877,2.6731603145599365,1.256932020187378,3.617617607116699,6.9838786125183105,2.2329084873199463,1.441616177558899,2.775621175765991,2.0195462703704834,2.1806344985961914,5.878400802612305,2.0193111896514893,2.765691041946411,3.3898162841796875,-0.42040765285491943,4.742151737213135,2.105271339416504,3.5715863704681396,4.699728488922119,4.434690475463867,0.0364224910736084,3.7667343616485596,1.6464998722076416,1.952032446861267,0.7563254833221436,4.169106960296631,2.667721748352051,1.7286286354064941,3.5303101539611816,2.619636058807373,6.090705394744873,3.2938661575317383,3.329054832458496,2.9974515438079834,1.6179156303405762,1.909142017364502,0.8081420660018921,3.3404364585876465,-0.3765679597854614,3.594271183013916,-0.652580976486206,2.7711896896362305,3.502941131591797,3.2352700233459473,-2.933446168899536,3.2116997241973877,-0.25933271646499634,1.552600622177124,5.338286399841309,2.120037794113159,6.183045387268066,1.5933833122253418


var i = 0;
// <textarea id="textarea" rows=100 cols=100></textarea>
// var textarea = document.getElementById("textarea")

// var textarea = document.createElement("textarea");
// document.getElementById("mocha").appendChild(textarea);
// textarea.rows=100
// textarea.cols=100
// textarea.value=
inputData.addEventListener('change', function(e) {
            var file = inputData.files[0];
            var textType = /text.*/;

            if (file.type.match(textType)) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    var text = reader.result;
                    var arr = text.split(",");
                    var file_data = new Float32Array(arr.length);
                    for(j in arr) {
                       var b = parseFloat(arr[j]);
                       file_data[j] = b;
                    }
                  
                   // new_float_array = new Float32Array(origin_float_array);
                   // var width = 513, height = 513, depth = 21;
                   // for (var c = 0; c < depth; c++) {
                   //   for (var h = 0; h < height; h++) {
                   //     for (var w = 0; w < width; w++) {
                   //       new_float_array[c +
                   //                         h * width * depth + w * depth] =
                   //       origin_float_array[c * width * height + h * width + w];
                   //     }
                   //   }
                   // }

                   if (i == 0) {
                      input_data = file_data;
                    } else if (i == 1) {
                        weights_data = file_data;
                    } else if (i == 2) {
                        bais_data = file_data;
                    } else if (i == 3) {
                        output_data = file_data;
                    }
                    i++;
                   console.log(file_data.length);
                }

                reader.readAsText(file);    
            } else {
                fileDisplayArea.innerText = "File not supported!"
            }
        });
    </script>
  </body>
</html>
